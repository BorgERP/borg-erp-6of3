<?xml version="1.0" ?>
<openerp>
<data>

    <record model="ir.ui.view" id="view_fina_mn_form">
        <field name="name">view.fina.mn.form</field>
        <field name="model">l10n_hr_fina.mn</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Datoteka izvoda FINA MN">
                <field name="name" />
                <field name="journal_id" widget="selection"/>
                <field name="date" />
                <field name="fina_data" />
                <field name="user_id" />
                <field name="company_id" widget="selection" groups="base.group_multi_company"/>
                <notebook colspan="4">
                    <page string="Log">
                       <field name="note" colspan="4" nolabel="1"/>
                    </page>
                    <page string="Statements">
                       <field name="statement_ids" colspan="4" nolabel="1"/>
                    </page>
                </notebook>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_fina_mn_tree">
        <field name="name">view.fina.mn.tree</field>
        <field name="model">l10n_hr_fina.mn</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Datoteka izvoda FINA MN">
                <!--field name="journal_id" /-->
                <field name="date" />
                <field name="name" />
                <field name="user_id" />
                <field name="company_id" widget="selection" groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>

    <record  model="ir.ui.view" id="view_fina_mn_search">
        <field name="name">view.fina.mn.search</field>
        <field name="model">l10n_hr_fina.mn</field>
        <field name="type">search</field>
        <field name="arch" type="xml">
            <search string="">
               <group col="10" colspan="4">
                    <!--field name="journal_id" widget='selection'/ -->
                    <field name="date"/>
                	<field name="name" />
                    <field name="user_id" widget='selection'/>
                    <field name="company_id" widget="selection" groups="base.group_multi_company"/>
                </group>
                <newline/>
                <group expand="0" string="Group By...">
                    <filter string="User" icon="terp-personal" domain="[]"  context="{'group_by':'user_id'}"/>
                    <separator orientation="vertical"/>
                    <filter string="Journal" icon="terp-folder-orange" domain="[]" context="{'group_by':'journal_id'}"/>
                    <filter string="Date" icon="terp-go-month" domain="[]" context="{'group_by':'date'}"/>
                    <separator orientation="vertical"/>
                    <filter string="Company" icon="terp-go-home" domain="[]" groups="base.group_multi_company" context="{'group_by':'company_id'}"/>
                </group>
           </search>
        </field>
    </record>

	    <record model="ir.actions.act_window" id="action_fina_mn">
	        <field name="name">Fina MN datoteke</field>
	        <field name="type">ir.actions.act_window</field>
	        <field name="res_model">l10n_hr_fina.mn</field>
	        <field name="view_type">form</field>
	        <field name="view_mode">tree,form</field>
	        <field name="context">{}</field>
	        <field name="search_view_id" ref="view_fina_mn_search"/>
	    </record>

	   	<record model="ir.actions.act_window" id="action_fina_mn_import_file" >
            <field name="name">Uvoz FINA MN datoteke</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">l10n_hr_fina.mn.import</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <record model="ir.ui.view" id="fina_mn_import_wizard_view">
             <field name="name">Uvoz FINA MN datoteke</field>
             <field name="model">l10n_hr_fina.mn.import</field>
             <field name="type">form</field>
             <field name="arch" type="xml">
				<form string="Uvoz FINA MN datoteke">
					<group col="4" fill="0" states="choose">
	                    <field invisible="1" name="state"/>
						<separator string="Configure Your Journal and Account :"/>
					    <newline/>
					    <group colspan="4">
		                    <field name="def_receivable" />
		                    <field name="def_payable" />
		                    <field name="journal_id" domain="[('type','=','bank')]" />
		                    <field name="awaiting_account" />
					    </group>
					    <newline/>
					    <separator string="Click on 'New' to select your file :" colspan="4"/>
					    <field name="fina_data"/>
					    <newline/>
					    <separator colspan="4"/>
						<group colspan="4">
	     					<button special="cancel" string="Cancel" icon="gtk-cancel"/>
	               			<button name="parse_mn_file" string="Import" type="object" icon="gtk-ok"/>
	 					</group>
					</group>
					<group col="4" fill="0" states="finish">
						<separator string="Results :" colspan="4"/>
				    	<field name="note" nolabel="1" colspan="4"/>
						<group colspan="4">
							<button special="cancel" string="Close" icon="gtk-cancel"/>
							<button name="action_open_window" string="Open Statements" type="object" icon="gtk-apply"/>
						</group>
					</group>
				</form>
			</field>
		</record>


    <act_window name="Datoteke izvoda"
		domain="[('statement_ids', 'in', [active_id])]"
		context="{'bank_statement': 1}"
		res_model="l10n_hr_fina.mn"
		src_model="account.bank.statement"
		view_type="form"
		view_mode="tree,form"
		id="act_bank_statement_fina_mn_files"/>


    <!--***************************** BANK STATEMENT *********************************-->
    <record id="view_bank_statement_form_fina_mn" model="ir.ui.view">
        <field name="name">account.bank.statement.form.fina_mn</field>
        <field name="model">account.bank.statement</field>
        <field name="type">form</field>
        <field name="inherit_id" ref="account.view_bank_statement_form"/>
        <field name="arch" type="xml">
        	<field name="company_id" position="after">
                <button name="find_partner_and_voucher"     string = "Find partner"                  type="object" icon="gtk-execute"/>
                <button name="add_bank_accounts_from_lines" string = "Add bank accounts to partners" type="object" icon="gtk-execute"/>
        	</field>
        </field>
    </record>

	<delete model="ir.ui.menu" search="[('name','=','Bank Statements')]" />

    <menuitem name="Bank"  id="menu_finance_banks"  
    	  parent="account.menu_finance_bank_and_cash" 
        sequence="1"/>
    	    
	    <menuitem name="Izvodi banke" id="menu_bank_statements"   
	    	    parent="menu_finance_banks"      
	    	    action="account.action_bank_statement_tree" sequence="10"/>
	
	    <menuitem name="Import Statements" id="menu_account_izvod_import" 
	    	    parent="menu_finance_banks"    
	    	    action="action_fina_mn_import_file" sequence="20"/>
	
	    <menuitem name="Statements files"     
	    	    parent="menu_finance_banks" 
	    	    action="act_bank_statement_fina_mn_files"     
	    	    groups="base.group_extended" sequence="30"/>
    	    
    	    
    <!--menuitem name="Import Statements" parent="menu_finance_banks" id="menu_account_izvod_import"
               action="action_account_mnizvod_import" sequence="20"/-->



    </data>
    
</openerp>
